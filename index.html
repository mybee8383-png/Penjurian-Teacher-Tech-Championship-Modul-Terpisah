<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teacher Tech Championship • Beranda</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* === THEME (ubah HEX di sini kalau perlu) === */
    :root {
      --kv-primary:#012C78;   /* header text deep blue */
      --kv-deep:#033686;      /* deep */
      --kv-bright:#0172EA;    /* bright */
      --kv-accent:#49A4F3;    /* light accent */
      --kv-bg:#F3F7FF;        /* page bg */
      --kv-yellow:#FFD24A;    /* badge highlight */
      --kv-yellow-50:#FFF6D5;
      --kv-yellow-200:#FFE69A;
      --kv-yellow-800:#7A5F00;
    }
  </style>
</head>
<body class="bg-[var(--kv-bg)] text-slate-800">
  <!-- Hero -->
  <div class="relative overflow-hidden">
    <!-- Gradasi biru ringan -->
    <div class="absolute inset-0 bg-gradient-to-br
                from-[color:rgb(1,114,234)/0.12]
                via-[color:rgb(73,164,243)/0.10]
                to-[color:rgb(1,44,120)/0.10]"></div>

    <!-- Header -->
    <header class="relative max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <!-- ====== LOGO HEADER (dibesarkan) ====== -->
        <img src="assets/logo_ttc.png" alt="Logo Teacher Tech Championship"
             class="h-14 md:h-20 w-auto object-contain" decoding="async" fetchpriority="high">
        <h1 class="text-xl md:text-2xl font-bold text-[var(--kv-primary)]">Teacher Tech Championship</h1>
      </div>
      <a href="https://github.com"
         class="hidden md:inline text-sm text-[var(--kv-primary)] opacity-80 hover:opacity-100 transition">
         GitHub Pages
      </a>
    </header>

    <!-- Hero Section -->
    <section class="relative max-w-6xl mx-auto px-6 pb-6">
      <!-- KARTU BERANDA + WATERMARK -->
      <div class="relative overflow-hidden rounded-2xl bg-white/85 backdrop-blur border border-white/60 shadow-sm p-6 md:p-8">
        <!-- ====== WATERMARK LOGO (latar belakang modul) ====== -->
        <img src="assets/logo_ttc.png" alt="" aria-hidden="true"
             class="pointer-events-none select-none absolute -right-6 -top-6 md:right-2 md:-top-8
                    w-[180px] md:w-[280px] lg:w-[340px] opacity-10 mix-blend-multiply">

        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
          <div>
            <!-- Status pill; di-update JS -->
            <div id="pillStatus"
                 class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium mb-3
                        bg-[color:var(--kv-accent)]/10 text-[var(--kv-deep)]">
              <span id="dotStatus" class="w-2 h-2 rounded-full bg-rose-500"></span>
              <span id="labelStatus">Konfigurasi belum dibuat</span>
            </div>
            <h2 class="text-2xl md:text-3xl font-bold text-slate-900">Panel Beranda</h2>
            <p class="text-slate-600 mt-2">Kelola data lomba, lakukan penjurian, dan lihat hasil rekap per wilayah — semuanya dari satu tempat.</p>

            <div class="mt-5 flex flex-wrap gap-3">
              <button id="btnResetAll" class="inline-flex items-center gap-2 rounded-md border border-rose-300 text-rose-700 hover:bg-rose-50 px-4 py-2">
                <!-- icon trash -->
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-width="1.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m-7 0h8l-1-2H10l-1 2z"/></svg>
                Reset Semua Data
              </button>
            </div>
          </div>

          <!-- Status ringkas -->
          <div class="min-w-[280px] grow md:max-w-sm">
            <div class="grid grid-cols-2 gap-3">
              <div class="rounded-xl border border-slate-200 bg-white p-4">
                <div class="text-xs text-slate-500">Sekolah</div>
                <div class="mt-1 text-2xl font-bold" id="statSekolah">—</div>
              </div>
              <div class="rounded-xl border border-slate-200 bg-white p-4">
                <div class="text-xs text-slate-500">Aspek</div>
                <div class="mt-1 text-2xl font-bold" id="statAspek">—</div>
              </div>
              <div class="rounded-xl border border-slate-200 bg-white p-4">
                <div class="text-xs text-slate-500">Total Juri</div>
                <div class="mt-1 text-2xl font-bold" id="statJuri">—</div>
              </div>
              <div class="rounded-xl border border-slate-200 bg-white p-4">
                <div class="text-xs text-slate-500">Juri Mengisi</div>
                <div class="mt-1 text-2xl font-bold" id="statJuriIsi">0</div>
              </div>
            </div>

            <!-- Progress -->
            <div class="mt-4">
              <div class="flex items-center justify-between text-xs text-slate-600 mb-1">
                <span>Progress Penjurian (berdasarkan jumlah juri)</span>
                <span id="labelProgress">0%</span>
              </div>
              <div class="h-2 w-full rounded-full bg-slate-200 overflow-hidden">
                <div id="barProgress" class="h-full rounded-full bg-[var(--kv-bright)]" style="width:0%"></div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Kartu modul -->
  <main class="max-w-6xl mx-auto px-6 py-10">
    <div class="grid md:grid-cols-3 gap-6">
      <!-- Data -->
      <a href="data.html" class="group rounded-2xl bg-white border border-slate-200 p-6 shadow-sm hover:shadow-md transition">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold">Modul Data</h3>
          <span class="rounded-full text-xs px-2 py-1 border
                       bg-[color:var(--kv-accent)]/10 text-[var(--kv-deep)] border-[color:var(--kv-accent)]/30">Admin</span>
        </div>
        <p class="text-slate-600 mt-2">Masukkan sekolah & wilayah, tentukan aspek dan bobot (total 100%), serta daftar nama juri.</p>
        <div class="mt-4 flex items-center gap-2 text-[var(--kv-bright)] group-hover:gap-3">
          <span class="text-sm font-medium">Buka</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="1.5" d="M9 5l7 7-7 7"/></svg>
        </div>
      </a>

      <!-- Juri -->
      <a href="juri.html" class="group rounded-2xl bg-white border border-slate-200 p-6 shadow-sm hover:shadow-md transition">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold">Modul Juri</h3>
          <span class="rounded-full bg-emerald-50 text-emerald-700 text-xs px-2 py-1 border border-emerald-100">Penilaian</span>
        </div>
        <p class="text-slate-600 mt-2">Pilih nama juri dari dropdown, isi nilai tiap aspek untuk seluruh sekolah. Otomatis tersimpan & ada rekap per juri.</p>
        <div class="mt-4 flex items-center gap-2 text-emerald-700 group-hover:gap-3">
          <span class="text-sm font-medium">Buka</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="1.5" d="M9 5l7 7-7 7"/></svg>
        </div>
      </a>

      <!-- Hasil -->
      <a href="hasil.html" class="group rounded-2xl bg-white border border-slate-200 p-6 shadow-sm hover:shadow-md transition">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold">Modul Hasil</h3>
          <!-- Aksen kuning KV -->
          <span class="rounded-full text-xs px-2 py-1 border
                       bg-[var(--kv-yellow-50)] text-[var(--kv-yellow-800)] border-[var(--kv-yellow-200)]">Rekap</span>
        </div>
        <p class="text-slate-600 mt-2">Gabungkan nilai seluruh juri, lihat peringkat tiap wilayah (rata-rata), SD & ekspor CSV.</p>
        <div class="mt-4 flex items-center gap-2 text-[var(--kv-primary)] group-hover:gap-3">
          <span class="text-sm font-medium">Buka</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="1.5" d="M9 5l7 7-7 7"/></svg>
        </div>
      </a>
    </div>

    <!-- Tips -->
    <div class="mt-10 rounded-2xl bg-white border border-slate-200 p-6">
      <h4 class="font-semibold">Tips cepat</h4>
      <ul class="list-disc pl-5 text-slate-600 mt-2 space-y-1 text-sm">
        <li>Mulai dari <strong>Modul Data</strong> untuk membuat konfigurasi.</li>
        <li>Di <strong>Modul Juri</strong>, nilai otomatis tersimpan di perangkat (LocalStorage).</li>
        <li>Di <strong>Modul Hasil</strong>, klik “Hitung &amp; Tampilkan” untuk melihat peringkat per wilayah.</li>
      </ul>
    </div>
  </main>

  <footer class="max-w-6xl mx-auto px-6 py-10 text-xs text-slate-500">
    © Teacher Tech Championship · Aplikasi penjurian sederhana (client-side).
  </footer>

  <script>
    // ===== Helpers =====
    const $ = (s) => document.querySelector(s);

    function getConfig() {
      try { return JSON.parse(localStorage.getItem('TTC_config') || 'null'); }
      catch { return null; }
    }
    function getJudgesWithScores() {
      const names = [];
      for (let i = 0; i < localStorage.length; i++) {
        const k = localStorage.key(i);
        if (k && k.startsWith('TTC_scores_')) names.push(k.replace('TTC_scores_', ''));
      }
      return names;
    }
    function setStatus() {
      const cfg = getConfig();
      const judgeFilled = getJudgesWithScores();

      // Status pill
      const hasCfg = !!cfg;
      $('#labelStatus').textContent = hasCfg ? 'Konfigurasi tersimpan' : 'Konfigurasi belum dibuat';
      $('#dotStatus').className = 'w-2 h-2 rounded-full ' + (hasCfg ? 'bg-emerald-500' : 'bg-rose-500');
      const pill = document.getElementById('pillStatus');
      pill.className = 'inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium mb-3 ' +
        (hasCfg ? 'bg-[#E8F7EF] text-emerald-700' : 'bg-rose-50 text-rose-700');

      // Stats
      const nSek = cfg?.sekolahs?.length ?? 0;
      const nAsp = cfg?.aspek?.length ?? 0;
      const nJuri = cfg?.judges?.length ?? 0;

      $('#statSekolah').textContent = nSek || '—';
      $('#statAspek').textContent   = nAsp || '—';
      $('#statJuri').textContent    = nJuri || '—';
      $('#statJuriIsi').textContent = judgeFilled.length;

      // Progress (berdasarkan jumlah juri yang sudah mulai menilai)
      const pct = nJuri ? Math.round((judgeFilled.length / nJuri) * 100) : 0;
      $('#labelProgress').textContent = pct + '%';
      $('#barProgress').style.width = pct + '%';
    }

    function resetAll() {
      if (!confirm('Hapus SEMUA data (konfigurasi + seluruh nilai juri)?')) return;
      const keys = Object.keys(localStorage);
      keys.forEach(k => { if (k.startsWith('TTC_')) localStorage.removeItem(k); });
      setStatus();
      alert('Semua data dihapus. Silakan mulai dari Modul Data.');
      location.href = 'data.html';
    }

    document.getElementById('btnResetAll').addEventListener('click', resetAll);
    // Render on load
    setStatus();
  </script>
</body>
</html>
